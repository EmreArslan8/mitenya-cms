"use strict";(self.webpackChunkkozmedo_cms=self.webpackChunkkozmedo_cms||[]).push([[7027],{27887:(I,g,e)=>{e.d(g,{r:()=>f});var o=e(67294),l=e(45697),c=e.n(l),v=e(99168),E=e(41580);function h(d,T,r){if(!d||!T)return{display:"none"};const{x:D,y:p}=r;return{transform:`translate(${D}px, ${p}px)`}}function f({renderItem:d}){const{itemType:T,isDragging:r,item:D,initialOffset:p,currentOffset:x,mouseOffset:F}=(0,v.useDragLayer)(C=>({item:C.getItem(),itemType:C.getItemType(),initialOffset:C.getInitialSourceClientOffset(),currentOffset:C.getSourceClientOffset(),isDragging:C.isDragging(),mouseOffset:C.getClientOffset()}));return r?o.createElement(E.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},o.createElement(E.x,{style:h(p,x,F)},d({type:T,item:D}))):null}f.propTypes={renderItem:c().func.isRequired}},99781:(I,g,e)=>{var o=e(67294);const l=(0,o.createContext)();var c=null},75642:(I,g,e)=>{e.d(g,{PL:()=>E,Y9:()=>Te.Y,zE:()=>ce,Ky:()=>u,fi:()=>U,zH:()=>fe,r5:()=>ae});var o=e(67294),l=e(86706),c=e(21323);const E=()=>{const t=(0,l.v9)(c.Z),s=(0,o.useCallback)(n=>t?.components?.[n]??{},[t]);return{...t,getComponentLayout:s}};var h=e(9669),f=e.n(h),d=e(31799),T=e(50361),r=e.n(T),D=e(27361),p=e.n(D),x=e(36968),F=e.n(x),C=e(47815);const w=(t,s)=>s.find(n=>n.uid===t),G=(t,s)=>{const n=q(t,s),i=z(n.contentType,s),O=ie(n.contentType,n.components);return F()(n,["contentType","layouts","edit"],i),F()(n,["contentType","layouts","list"],O),Object.keys(n.components).forEach(y=>{const P=z(n.components[y],s);F()(n,["components",y,"layouts","edit"],P)}),n},q=(t,s)=>{const n=(0,C.w8)(r()(t),s,"contentType"),{components:i,contentType:O}=n,y=P=>Object.keys(P.metadatas).reduce((k,S)=>{const b=p()(P,["attributes",S],{});let B=P.metadatas[S];if(b.type==="relation"){const ye=w(b.targetModel,s),j=B.edit.mainField,Z={name:j,schema:p()(ye,["attributes",j])};B={list:{...B.list,mainField:Z},edit:{...B.edit,mainField:Z}}}return k[S]=B,k},{});return F()(n,["contentType","metadatas"],y(O)),Object.keys(i).forEach(P=>{const k=i[P],S=y(k);F()(n,["components",P,"metadatas"],S)}),n},z=(t,s)=>t.layouts.edit.reduce((n,i)=>{const O=i.map(y=>{const P=p()(t,["attributes",y.name],{}),k={...y,fieldSchema:P,metadatas:p()(t,["metadatas",y.name,"edit"],{})};if(P.type==="relation"){const b=w(P.targetModel,s).pluginOptions||{};F()(k,"targetModelPluginOptions",b),F()(k,"queryInfos",{shouldDisplayRelationLink:ee(t,y.name,s)})}return k});return n.push(O),n},[]),ie=(t,s)=>t.layouts.list.reduce((i,O)=>{const y=p()(t,["attributes",O],{}),P=p()(t,["metadatas",O,"list"],{}),k=y.type;if(k==="relation")return i.push({key:`__${O}_key__`,name:O,fieldSchema:y,metadatas:P}),i;if(k==="component"){const S=s[y.component],b=S.settings.mainField,B=S.attributes[b];return i.push({key:`__${O}_key__`,name:O,fieldSchema:y,metadatas:{...P,mainField:{...B,name:b}}}),i}return i.push({key:`__${O}_key__`,name:O,fieldSchema:y,metadatas:P}),i},[]),ee=(t,s,n)=>{const i=p()(t,["attributes",s,"targetModel"],"");return te(n).includes(i)},te=t=>t.filter(s=>s.isDisplayed).map(({uid:s})=>s),V=G;var K=e(18172);const ne={error:null,isLoading:!0,layout:{},layouts:{}},Y=(t,s)=>(0,K.ZP)(t,n=>{switch(s.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const i=s.data.contentType.uid;n.layout=s.data,n.layouts[i]=s.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=s.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=t.layouts[s.uid];break}case"UPDATE_LAYOUT":{const i=t.layout;n.layout={...i,contentType:{uid:i.contentType.uid,...s.newLayout.contentType}},n.layouts[i.contentType.uid]={...i,contentType:{uid:i.contentType.uid,...s.newLayout.contentType}};break}default:return n}});var _=e(84668);const ce=t=>{const[{error:s,isLoading:n,layout:i,layouts:O},y]=(0,o.useReducer)(Y,ne),P=(0,o.useMemo)(_.Vo,[]),{schemas:k}=(0,l.v9)(j=>P(j),l.wU),S=(0,o.useRef)(!0),{get:b}=(0,d.kY)(),B=(0,o.useCallback)(async(j,Z)=>{if(O[j]){y({type:"SET_LAYOUT_FROM_STATE",uid:j});return}y({type:"GET_DATA"});try{const{data:{data:le}}=await b(`/content-manager/content-types/${j}/configuration`,{cancelToken:Z.token});y({type:"GET_DATA_SUCCEEDED",data:V(le,k)})}catch(le){if(f().isCancel(le))return;S.current&&console.error(le),S.current&&y({type:"GET_DATA_ERROR",error:le})}},[O,k,b]);(0,o.useEffect)(()=>()=>{S.current=!1},[]),(0,o.useEffect)(()=>{const Z=f().CancelToken.source();return B(t,Z),()=>{Z.cancel("Operation canceled by the user.")}},[t,B]);const ye=(0,o.useCallback)(j=>{y({type:"UPDATE_LAYOUT",newLayout:V(j,k)})},[k]);return{error:s,isLoading:n,layout:i,updateLayout:ye}},ue=t=>t["content-manager_app"].collectionTypeLinks;var $=e(80129),pe=e(13218),de=e.n(pe);const H=(t,s)=>Object.keys(t).reduce((n,i)=>{const O=t[i],y=p()(s,[i],O);return de()(O)?{...n,[i]:H(O,y)}:(n[i]=y,n)},{}),me=(t,s,n)=>{const i=t.find(({to:B})=>B.includes(s));if(!i)return"/";const{to:O,search:y}=i,P=(0,$.parse)(y),k=(0,$.parse)(n.substring(1)),S=H(P,k);return`${O}?${(0,$.stringify)(S,{encode:!1})}`},u=t=>{const[{rawQuery:s}]=(0,d.Kx)(),n=(0,l.v9)(ue);return me(n,t,s)};var m=e(16550);const U=()=>{const{search:t}=(0,m.TH)(),s=t?(0,$.parse)(t.substring(1)):{};return s.plugins?(0,$.stringify)({plugins:s.plugins},{encode:!1}):""};var N=e(80015);const R=(t,s,n)=>({type:N.m,permissions:t,__meta__:{plugins:s,containerName:n}}),L=()=>({type:N.Q}),M=t=>t["content-manager_rbacManager"].permissions,W=t=>t.rbacProvider.collectionTypesRelatedPermissions,ae=(t,s,n="listView")=>{const i=(0,l.v9)(W),O=(0,l.v9)(M),y=(0,l.I0)(),P=i[s];return(0,o.useEffect)(()=>P?(y(R(P,t?t.plugins:null,n)),()=>{y(L())}):()=>{},[P,y,t,n]),O};var Q=e(99781);const re=()=>useContext(WysiwygContext),Ee=null,fe=t=>{const s=(0,o.useRef)();return(0,o.useEffect)(()=>{s.current=t},[t]),s.current};var Te=e(15699),De=e(40703)},15699:(I,g,e)=>{e.d(g,{Y:()=>E});var o=e(67294),l=e(99168),c=e.n(l),v=e(40703);const E=(h,{type:f="STRAPI_DND",index:d,item:T={},onStart:r,onEnd:D,onGrabItem:p,onDropItem:x,onCancel:F,onMoveItem:C,dropSensitivity:w="regular"})=>{const G=(0,o.useRef)(null),[{handlerId:q},z]=(0,l.useDrop)({accept:f,collect(K){return{handlerId:K.getHandlerId()}},hover(K,ne){if(!G.current)return;const X=K.index,Y=d;if(X!==Y){if(w==="regular"){const _=G.current.getBoundingClientRect(),se=(_.bottom-_.top)/2,oe=ne.getClientOffset().y-_.top;if(X<Y&&oe<se||X>Y&&oe>se)return}C(Y,X),K.index=Y}}}),[{isDragging:ie},ee,te]=(0,l.useDrag)({type:f,item(){r&&r();const{width:K}=G.current?.getBoundingClientRect()??{};return{index:d,width:K,...T}},end(){D&&D()},canDrag:h,isDragging:T.id?K=>T.id===K.getItem().id:void 0,collect:K=>({isDragging:K.isDragging()})}),V=(0,v.A)(h,d,{onGrabItem:p,onDropItem:x,onCancel:F,onMoveItem:C});return[{handlerId:q,isDragging:ie,handleKeyDown:V},G,z,ee,te]}},40703:(I,g,e)=>{e.d(g,{A:()=>l});var o=e(67294);const l=(c,v,{onCancel:E,onDropItem:h,onGrabItem:f,onMoveItem:d})=>{const[T,r]=(0,o.useState)(!1),D=C=>{T&&(C==="UP"?d(v-1,v):C==="DOWN"&&d(v+1,v))},p=()=>{T?(h&&h(v),r(!1)):(f&&f(v),r(!0))},x=()=>{T&&(r(!1),E&&E(v))};return C=>{if(c&&!(C.key==="Tab"&&!T))switch(C.preventDefault(),C.key){case" ":case"Enter":p();break;case"Escape":x();break;case"ArrowDown":case"ArrowRight":D("DOWN");break;case"ArrowUp":case"ArrowLeft":D("UP");break;default:}}}},84668:(I,g,e)=>{e.d(g,{Jg:()=>d,KQ:()=>h,Vo:()=>f,Yg:()=>c});var o=e(20573),l=e(14506);const c=()=>r=>r["content-manager_app"]||l.E,v=()=>createSelector(c(),r=>r),E=()=>createSelector(c(),r=>r.models),h=()=>(0,o.P1)(c(),r=>({collectionTypeLinks:r.collectionTypeLinks,singleTypeLinks:r.singleTypeLinks})),f=()=>(0,o.P1)(c(),({components:r,models:D})=>({schemas:[...r,...D]})),d=(0,o.P1)(c(),r=>r.fieldSizes);var T=null},21323:(I,g,e)=>{e.d(g,{Z:()=>l});const l=c=>c["content-manager_editViewLayoutManager"].currentLayout},56723:(I,g,e)=>{e.d(g,{Z:()=>o});const o={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},69881:(I,g,e)=>{e.d(g,{Z:()=>l});const l=c=>`content-manager.${c}`},47815:(I,g,e)=>{e.d(g,{_Q:()=>oe.Z,W3:()=>v,ko:()=>d,FE:()=>r,Di:()=>F,du:()=>q,TA:()=>ee,Ts:()=>ne,Uo:()=>Y,IF:()=>se,OB:()=>ce.Z,w8:()=>de,kc:()=>me});var o=e(50361),l=e.n(o);const v=(a,u,m)=>{if(Array.isArray(a)&&u>=0&&m>=0&&u<=a.length-1&&m<=a.length-1){const A=l()(a),U=A.splice(u,1);return A.splice(m,0,U[0]),A}return a};var E=e(7334),h=e.n(E);const d=a=>{const u=a.type;return u==="relation"?!h()(a.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(u)&&!!u},T=(a,u)=>{typeof a=="function"?a(u):a!=null&&(a.current=u)},r=(...a)=>u=>a.forEach(m=>T(m,u));var D=e(27361),p=e.n(D);const x=(a,u)=>Object.keys(a).reduce((m,A)=>{const U=p()(a,[A],{}),{default:N,component:R,type:L,required:M,min:W,repeatable:J}=U;if(N!==void 0&&(m[A]=N),L==="component"){const ae=u?.[R]?.attributes??{},Q=x(ae,u);if(M===!0&&(m[A]=J===!0?[]:Q),W&&J===!0&&M){m[A]=[];for(let re=0;re<W;re+=1)m[A].push(Q)}}return L==="dynamiczone"&&M===!0&&(m[A]=[]),m},{}),F=x;var C=e(57557),w=e.n(C);const q=({layouts:a,metadatas:u,...m})=>{const A=a.list.map(R=>R.name?R.name:R),U=Object.keys(u).reduce((R,L)=>{const M=p()(u,[L],{});let W=M.edit;return W.mainField&&(W={...W,mainField:M.edit.mainField.name}),{...R,[L]:{edit:W,list:w()(M.list,["mainField"])}}},{}),N=a.edit.map(R=>R.map(({name:L,size:M})=>({name:L,size:M})));return{...m,layouts:{edit:N,list:A},metadatas:U}},z=(a,u)=>a.map(m=>({...m,subject:u})),ee=a=>{const u={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(u).reduce((m,A)=>(m[A]=z(u[A],a),m),{})};var te=e(7654),V=e.n(te);const ne=a=>a.split(".").filter(u=>V()(parseInt(u,10))),Y=a=>{if(a.length===0)return-1;const u=Math.max.apply(Math,a.map(m=>m.__temp_key__??0));return Number.isNaN(u)?-1:u},se=a=>`/content-manager/${a}`;var ce=e(69881),oe=e(56723),ue=e(36968),$=e.n(ue);const de=(a,u,m)=>{const A=L=>u.find(M=>M.uid===L),U=Object.assign({},a),N=a[m].uid,R=A(N);return $()(U,[m],{...a[m],...R}),Object.keys(a.components).forEach(L=>{const M=A(L);$()(U,["components",L],{...a.components[L],...M})}),U};var H=e(31799);const me=(a,u,m)=>{const A=(U,N)=>Object.keys(U).reduce((R,L)=>{const M=(0,H.UN)(N,L),W=p()(U,L),J=(0,H.k2)(N,[L,"component"]),ae=(0,H.k2)(N,[L,"repeatable"]);return M==="dynamiczone"?(R[L]=W.map(Q=>A(Q,m[Q.__component])),R):M==="component"?(ae?R[L]=W&&W.map(Q=>A(Q,m[J])):R[L]=W&&A(W,m[J]),R):(M!=="password"&&(R[L]=W),R)},{});return A(a,u)}},75194:(I,g,e)=>{e.d(g,{K:()=>d});var o=e(67294),l=e(45697),c=e.n(l),v=e(5079),E=e(11047),h=e(75515),f=e(13037);function d({children:T,...r}){const{color:D}=r.data,{themeColorName:p}=(0,f.k)(D);return o.createElement(v.c.Option,{...r},o.createElement(E.k,{alignItems:"center",gap:2},o.createElement(E.k,{height:2,background:D,borderColor:p==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(h.Z,{textColor:"neutral800",ellipsis:!0},T)))}d.propTypes={children:c().node.isRequired,data:c().shape({color:c().string}).isRequired}},54878:(I,g,e)=>{e.d(g,{R:()=>d});var o=e(67294),l=e(45697),c=e.n(l),v=e(5079),E=e(11047),h=e(75515),f=e(13037);function d({children:T,...r}){const{color:D}=r.data,{themeColorName:p}=D?(0,f.k)(D):{};return o.createElement(v.c.SingleValue,{...r},o.createElement(E.k,{alignItems:"center",gap:2},o.createElement(E.k,{height:2,background:D,borderColor:p==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(h.Z,{textColor:"neutral800",ellipsis:!0},T)))}d.defaultProps={children:null},d.propTypes={children:c().node,data:c().shape({color:c().string}).isRequired}},53616:(I,g,e)=>{e.d(g,{$k:()=>f,FT:()=>T,Nj:()=>h,Ot:()=>E,QM:()=>c,lv:()=>d,sN:()=>l,uL:()=>r,x4:()=>v});var o=e(42675);const l="settings_review-workflows",c="Settings/Review_Workflows/SET_WORKFLOWS",v="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",E="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",h="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",f="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",d={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},T=o.W.colors.primary600,r={STAGE:"stage"}},53752:(I,g,e)=>{e.d(g,{n:()=>E});var o=e(88767),l=e(31799),c=e(80129),v=e.n(c);function E(h={}){const{id:f="",...d}=h,T={populate:"stages"},{get:r}=(0,l.kY)(),D=(0,c.stringify)({...T,...d},{encode:!1}),{data:p,isLoading:x,status:F,refetch:C}=(0,o.useQuery)(["review-workflows","workflows",f],async()=>{try{const{data:{data:G}}=await r(`/admin/review-workflows/workflows/${f}${D?`?${D}`:""}`);return G}catch{return null}});let w=[];return f&&p?w=[p]:Array.isArray(p)&&(w=p),{workflows:w,isLoading:x,status:F,refetch:C}}},13037:(I,g,e)=>{e.d(g,{k:()=>c,s:()=>v});var o=e(42675),l=e(53616);function c(E){if(!E)return null;const f=Object.entries(o.W.colors).filter(([,d])=>d.toUpperCase()===E.toUpperCase()).reduce((d,[T])=>(l.lv?.[T]&&(d=T),d),null);return f?{themeColorName:f,name:l.lv[f]}:null}function v(){return Object.entries(l.lv).map(([E,h])=>({hex:o.W.colors[E].toUpperCase(),name:h}))}}}]);
